<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jordan Cota | Personal Site</title>
    <style>
        :root {
            --bg-primary: #f8f9fa;
            --bg-secondary: white;
            --text-primary: #333;
            --text-secondary: #666;
            --accent: #007BFF;
            --accent-hover: #0056b3;
            --shadow: rgba(0,0,0,0.1);
            --border: #e9ecef;
        }
        [data-theme="dark"] {
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --accent: #007BFF;
            --accent-hover: #0056b3;
            --shadow: rgba(0,0,0,0.3);
            --border: #333;
        } 
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            gap: 2rem;
            align-items: flex-start;
        }
        .photo {
            flex: 0 0 250px;
        }
        .photo img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
        }
        .content {
            flex: 1;
        }
        .header {
            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
            color: white;
            padding: 1.5rem;
            border-radius: 12px 12px 0 0;
            margin-bottom: 1rem;
            position: relative;
        }
        .header h1 {
            margin: 0 0 0.5rem 0;
            font-size: 2.5rem;
            font-weight: bold;
        }
        .header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }
        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: border-color 0.3s ease;
        }
        .theme-toggle:hover {
            border-color: rgba(255,255,255,0.6);
        }
        
        /* --- Corrected Slideshow Styles --- */
        .slideshow-container {
            max-width: 100%;
            position: relative;
            margin: 20px auto;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px var(--shadow);
        }
        .mySlides {
            display: none;
            width: 100%;
            animation-name: fade;
            animation-duration: 0.8s;
        }
        @keyframes fade {
          from {opacity: .4}
          to {opacity: 1}
        }
        .mySlides img {
            width: 100%;
            vertical-align: middle;
        }
        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: auto;
            padding: 16px;
            color: white;
            font-weight: bold;
            font-size: 20px;
            transition: 0.3s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0,0,0,0.5);
            z-index: 10;
        }
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }
        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.8);
        }
        .caption-container {
            text-align: center;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0,0,0,0.6);
            padding: 8px;
        }
        #caption {
            margin: 0;
            font-size: 15px;
            color: white;
        }

        .tabs {
            display: flex;
            background: var(--bg-secondary);
            border-radius: 8px 8px 0 0;
            margin-bottom: -1px;
            overflow: hidden;
            border: 1px solid var(--border);
            border-bottom: none;
        }
        .tabs button {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
        }
        .tabs button.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
            background: var(--bg-primary);
        }
        .tabs button:hover {
            background: var(--bg-primary);
            color: var(--accent);
        }
        .tab-content {
            display: none;
            background: var(--bg-secondary);
            border-radius: 0 0 12px 12px;
            box-shadow: 0 4px 12px var(--shadow);
            border: 1px solid var(--border);
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        .tab-content.active {
            display: block;
        }
        .section {
            margin-bottom: 1rem;
        }
        .section h2 {
            margin: 0 0 1rem 0;
            color: var(--accent);
            font-size: 1.5rem;
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.5rem;
        }
        .section p {
            margin: 0 0 1rem 0;
            text-align: justify;
            color: var(--text-primary);
        }
        .section a {
            color: var(--accent);
            text-decoration: none;
        }
        .section a:hover {
            text-decoration: underline;
        }
        .articles-list {
            list-style: none;
            padding: 0;
        }
        .articles-list li {
            margin-bottom: 1rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 8px;
            border-left: 4px solid var(--accent);
        }
        .articles-list h3 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
            font-size: 1.1rem;
        }
        .articles-list p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .portfolio-item, .hobby-item {
            background: var(--bg-primary);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px var(--shadow);
            transition: transform 0.2s;
        }
        .portfolio-item:hover, .hobby-item:hover {
            transform: translateY(-2px);
        }
        .portfolio-item img, .hobby-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .portfolio-item h3, .hobby-item h3 {
            margin: 0.5rem;
            color: var(--text-primary);
            font-size: 1rem;
        }
        .portfolio-item p, .hobby-item p {
            margin: 0 0.5rem 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        .contact-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            justify-content: center;
        }
        .contact-buttons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--accent);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: background 0.2s;
            flex-shrink: 0;
        }
        .contact-buttons a:hover {
            background: var(--accent-hover);
        }
        .icon-svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 1rem;
        }
        #gameCanvas {
            border: 2px solid var(--border);
            border-radius: 8px;
            background-color: var(--bg-primary);
            max-width: 100%;
            height: auto;
            touch-action: none;
        }
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        .restart-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 0.5rem;
            transition: background 0.2s;
        }
        .restart-btn:hover {
            background: var(--accent-hover);
        }
        .restart-btn:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
        }
        .game-controls {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 1rem;
            }
            .photo {
                flex: none;
                text-align: center;
            }
            .theme-toggle {
                top: 0.5rem;
                right: 0.5rem;
            }
            .contact-buttons {
                justify-content: center;
            }
            .tabs {
                flex-direction: column;
            }
            .tabs button {
                border-bottom: 1px solid var(--border);
            }
            .game-controls p::before {
                content: "Tilt to move (auto-fire) | ";
            }
        }
        @media (prefers-color-scheme: dark) {
            body:not([data-theme="light"]) {
                --bg-primary: #121212;
                --bg-secondary: #1e1e1e;
                --text-primary: #e0e0e0;
                --text-secondary: #b0b0b0;
                --shadow: rgba(0,0,0,0.3);
                --border: #333;
            }
        }
    </style>
</head>
<body>
    <div class="container">
       <div class="photo">
        <img src="Screenshot 2025-10-03 124247.png" alt="Jordan Cota">
        </div>
        <div class="content">
            <div class="header">
                <h1>Jordan Cota</h1>
                <p>Engineer / Account Manager | Atlanta, GA</p>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">🌙</button>
            </div>
            <nav class="tabs">
                <button class="tab-btn active" data-tab="home">Home</button>
                <button class="tab-btn" data-tab="portfolio">Portfolio</button>
                <button class="tab-btn" data-tab="hobbies">Hobbies</button>
            </nav>
            <div id="home-tab" class="tab-content active">
                <div class="section">
                    <h2>About Me</h2>
                    <p>I am currently a Solution Deployment Manager at <a href="https://glassdome.com" target="_blank">Glassdome</a>, where I help customers with their real-time reporting for OEE Metrics and KPIs.</p>
                    <p>I studied at the University of West Georgia in Carrollton with a focus in history, where I got an Associate's Degree (hardest degree to get, actually). I have a wide variety of passions and enjoy many activities in my free time. I enjoy pickleball, making kombucha, hiking with friends, long walks on the beach, and the discovery of new hobbies. I love working on my 1991 Honda Nighthawk 750 and old radios; I have a STA-78 Technics upstairs and a Sansui A2000 in the living area. Hell, I built this website with HTML coding so I am always tinkering in the analog and digital world!</p>
                </div>
                <div class="section">
                    <h2>Published Articles</h2>
                    <p>Check out some of my contributions to the Glassdome Sustainable Manufacturing Blog. These articles dive into practical tips for OT networks, continuous improvement, and more.</p>
                    <ul class="articles-list">
                        <li>
                            <h3><a href="https://glassdome.com/technical-guide-how-to-configure-mtconnect-on-a-haas-ngc-controller/" target="_blank">Technical Guide: How to Configure MTConnect on a Haas NGC Controller</a></h3>
                            <p>A step-by-step guide to integrating MTConnect for real-time data on Haas CNC machines.</p>
                        </li>
                        <li>
                            <h3><a href="https://glassdome.com/why-you-need-a-nat-device-for-your-ot-network/" target="_blank">Why You Need a NAT Device for Your OT Network</a></h3>
                            <p>Explore the role of NAT in securing and optimizing operational technology networks.</p>
                        </li>
                        <li>
                            <h3><a href="https://glassdome.com/what-is-kaizen-unlocking-continuous-improvement-on-the-shop-floor/" target="_blank">What is Kaizen? Unlocking Continuous Improvement on the Shop Floor</a></h3>
                            <p>An introduction to Kaizen principles and how they drive efficiency in manufacturing.</p>
                        </li>
                    </ul>
                </div>
                <div class="section">
                    <h2>Get in Touch</h2>
                    <p>I'm based in Atlanta, Georgia (I hate the traffic). Feel free to email me or connect on LinkedIn using the buttons below.</p>
                    <div class="contact-buttons">
                        <a href="mailto:cotafam10@gmail.com" aria-label="Email Jordan" title="Send Email">
                            <svg class="icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                            </svg>
                        </a>
                        <a href="https://linkedin.com/in/jordan-cota-19269117a" target="_blank" aria-label="Connect on LinkedIn" title="LinkedIn Profile">
                            <svg class="icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </a>
                        <a href="https://glassdome.com" target="_blank" aria-label="Glassdome" title="Glassdome Website">
                            <img src="glassdome_us_logo.jpg" alt="Glassdome" class="icon-svg">
                        </a>
                    </div>
                </div>
                <div class="section">
                    <h2>Fun Time: Play Space Invaders!</h2>
                    <p>One of my hobbies? Classic games! Built this simple Space Invaders right here. Use arrow keys to move, spacebar to shoot. Survive the invasion!</p>
                    <div class="game-container">
                        <div class="game-info">
                            <span id="score">Score: 0</span>
                            <span id="level">Level: 1</span>
                            <span id="lives">Lives: 3</span>
                        </div>
                        <canvas id="gameCanvas" width="800" height="600"></canvas>
                        <button class="restart-btn" id="restartBtn" onclick="restartGame()">Start Game</button>
                        <div class="game-controls">
                            <p>← → to move | Space to shoot | Refresh to restart</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="portfolio-tab" class="tab-content">
                <div class="section">
                    <h2>Portfolio</h2>
                    <p>Showcasing my professional projects and contributions in manufacturing and OT solutions.</p>
                    
                    <div class="project">
                        <h3>Forklift Conveyor OEE System</h3>
                        <p>This was a project that involved a forklift conveyor system. The customer wanted to see full OEE metrics on this conveyor system, such as part count, downtime, etc. Luckily, there was an Allen-Bradley PLC available. I pulled the PLC code, built a tag list, and connected with the PLC using the EIP protocol. I built the dashboard and OEE reporting for visualization for the customer. I also built displays for downtime code entries and utilize iPads along the conveyance system for operators.</p>
                        
                        <div class="slideshow-container">
                            <div class="mySlides">
                                <img src="ML1 Dash.png" alt="ML1 Dashboard" style="width:100%">
                            </div>
                            <div class="mySlides">
                                <img src="Main Line Dash.png" alt="Main Line Dashboard" style="width:100%">
                            </div>
                            <div class="mySlides">
                                <img src="PLC Code.png" alt="PLC Code" style="width:100%">
                            </div>
                            <div class="mySlides">
                                <img src="Downtime Entry ML1.png" alt="Downtime Entry ML1" style="width:100%">
                            </div>
                            <div class="mySlides">
                                <img src="ipad ML1.png" alt="iPad ML1 Interface" style="width:100%">
                            </div>
                            
                            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                            <a class="next" onclick="plusSlides(1)">&#10095;</a>

                            <div class="caption-container">
                                <p id="caption"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="hobbies-tab" class="tab-content">
                <div class="section">
                    <h2>Hobby Photos</h2>
                    <p>Snapshots from my downtime adventures—pickleball courts, kombucha brews, and trail hikes!</p>
                    <div class="portfolio-grid">
                        <div class="hobby-item">
                            <img src="https://via.placeholder.com/250x200?text=Pickleball+Game" alt="Pickleball">
                            <h3>Pickleball Match</h3>
                            <p>Intense rally on the court—nothing beats a good game with friends.</p>
                        </div>
                        <div class="hobby-item">
                            <img src="https://via.placeholder.com/250x200?text=Kombucha+Brew" alt="Kombucha">
                            <h3>Kombucha Brewing</h3>
                            <p>Second fermentation in progress—flavors: ginger and berry this batch.</p>
                        </div>
                        <div class="hobby-item">
                            <img src="https://via.placeholder.com/250x200?text=Hiking+Trail" alt="Hiking">
                            <h3>Trail Hike</h3>
                            <p>Sunset views from the Appalachian foothills—recharge mode activated.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Theme and Tab Controls ---
        const toggle = document.getElementById('themeToggle');
        const body = document.body;
        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        body.setAttribute('data-theme', savedTheme);
        toggle.textContent = savedTheme === 'dark' ? '☀️' : '🌙';
        toggle.addEventListener('click', () => {
            const current = body.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            toggle.textContent = next === 'dark' ? '☀️' : '🌙';
        });
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                body.setAttribute('data-theme', e.matches ? 'dark' : 'light');
                toggle.textContent = e.matches ? '☀️' : '🌙';
            }
        });
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.dataset.tab;
                tabBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                tabContents.forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });
    </script>
    
    <script>
        // --- Corrected Slideshow Script ---
        let slideIndex = 1;
        const captions = ["ML1 Dashboard", "Main Line Dashboard", "PLC Code", "Downtime Entry ML1", "iPad ML1 Interface"];
        showSlides(slideIndex);
        function plusSlides(n) {
          showSlides(slideIndex += n);
        }
        function showSlides(n) {
          let i;
          let slides = document.getElementsByClassName("mySlides");
          let captionText = document.getElementById("caption");
          if (n > slides.length) {slideIndex = 1}
          if (n < 1) {slideIndex = slides.length}
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
          }
          if (slides.length > 0) {
            slides[slideIndex - 1].style.display = "block";
            captionText.innerHTML = captions[slideIndex - 1];
          }
        }
    </script>

    <script>
        // --- Space Invaders Game Script ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const levelElement = document.getElementById('level');
        const livesElement = document.getElementById('lives');
        const restartBtn = document.getElementById('restartBtn');
        let score = 0;
        let lives = 3;
        let level = 1;
        let gameRunning = false; // Set to false to wait for start
        let lastShotTime = 0;
        let tiltEnabled = false;
        let mobileDetected = false;
        let tiltSensitivity = 3;
        let autoFireInterval = 300;
        const player = { x: canvas.width/2-15, y: canvas.height-50, width: 30, height: 20, speed: 5 };
        const bullets = [];
        const bulletSpeed = 7;
        const enemyBullets = [];
        let enemyBulletSpeed = 3;
        const enemies = [];
        let enemyRows = 5;
        let enemyCols = 10;
        const enemyWidth = 30;
        const enemyHeight = 20;
        const enemyPadding = 10;
        let enemyDirection = 1;
        let enemySpeed = 0.5;
        let lastEnemyShot = 0;
        let isTouching = false;
        let touchX = 0;

        function initTilt() {
            if (!('DeviceOrientationEvent' in window)) return;
            mobileDetected = true;
            if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
                canvas.addEventListener('touchstart', async (e) => {
                    try {
                        const permission = await DeviceOrientationEvent.requestPermission();
                        if (permission === 'granted') {
                            tiltEnabled = true;
                            window.addEventListener('deviceorientation', handleTilt);
                        }
                    } catch (err) { console.log('Tilt permission denied'); }
                }, { once: true });
            } else {
                tiltEnabled = true;
                window.addEventListener('deviceorientation', handleTilt);
            }
        }
        function handleTilt(e) {
            const gamma = e.gamma || 0;
            const tiltDelta = gamma * tiltSensitivity;
            player.x += tiltDelta;
            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
        }
        function initEnemies() {
            enemies.length = 0;
            for (let row=0; row<enemyRows; row++) {
                for (let col=0; col<enemyCols; col++) {
                    enemies.push({ x: col*(enemyWidth+enemyPadding)+50, y: row*(enemyHeight+enemyPadding)+50, width: enemyWidth, height: enemyHeight, alive: true, row: row });
                }
            }
        }
        const keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            if (e.code === 'Space' && gameRunning && !mobileDetected) { e.preventDefault(); shootPlayer(); }
        });
        document.addEventListener('keyup', (e) => { keys[e.code] = false; });
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault(); isTouching = true; const touch = e.touches[0];
            touchX = touch.clientX - canvas.getBoundingClientRect().left;
            if (!mobileDetected) shootPlayer(); if (!tiltEnabled) initTilt();
        });
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault(); if (isTouching) { const touch = e.touches[0]; touchX = touch.clientX - canvas.getBoundingClientRect().left; }
        });
        canvas.addEventListener('touchend', (e) => { e.preventDefault(); isTouching = false; });
        canvas.addEventListener('mousemove', (e) => {
            if (isTouching || tiltEnabled) return;
            touchX = e.clientX - canvas.getBoundingClientRect().left;
        });
        function shootPlayer() {
            const now = Date.now();
            if (now - lastShotTime > (mobileDetected ? autoFireInterval : 200) && gameRunning) {
                bullets.push({ x: player.x + player.width/2 - 2.5, y: player.y, width: 5, height: 10 });
                lastShotTime = now;
            }
        }
        function collision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.y + rect1.height > rect2.y;
        }
        function drawPlayer() {
            ctx.fillStyle = 'white'; ctx.strokeStyle = 'white'; ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(player.x+player.width/2, player.y); ctx.lineTo(player.x, player.y+player.height); ctx.lineTo(player.x+player.width, player.y+player.height); ctx.closePath(); ctx.fill(); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(player.x+5, player.y+10); ctx.lineTo(player.x, player.y+15); ctx.lineTo(player.x+10, player.y+10); ctx.moveTo(player.x+player.width-5, player.y+10); ctx.lineTo(player.x+player.width, player.y+15); ctx.lineTo(player.x+player.width-10, player.y+10); ctx.stroke();
            ctx.fillStyle = 'orange'; ctx.beginPath(); ctx.moveTo(player.x+8, player.y+player.height); ctx.lineTo(player.x+player.width/2, player.y+player.height+5); ctx.lineTo(player.x+player.width-8, player.y+player.height); ctx.closePath(); ctx.fill();
        }
        function drawEnemy(enemy) {
            const colors = ['#00ff41', '#00cc33', '#009922', '#006611', '#003300'];
            ctx.fillStyle = colors[enemy.row]; ctx.strokeStyle = '#00ff41'; ctx.lineWidth = 1;
            if (enemy.row === 0) {
                ctx.beginPath(); ctx.ellipse(enemy.x+enemy.width/2, enemy.y+enemy.height/2, 12, 8, 0, 0, 2 * Math.PI); ctx.fill(); ctx.stroke();
                ctx.strokeStyle=colors[enemy.row]; ctx.lineWidth=2;
                for (let i=0; i<4; i++) { const angle=(Math.PI*2/4)*i; const tx=enemy.x+enemy.width/2+Math.cos(angle)*15; const ty=enemy.y+enemy.height/2+Math.sin(angle)*10; ctx.beginPath(); ctx.moveTo(enemy.x+enemy.width/2, enemy.y+enemy.height/2); ctx.lineTo(tx, ty); ctx.stroke(); }
                ctx.fillStyle='red'; ctx.beginPath(); ctx.arc(enemy.x+8, enemy.y+6, 2, 0, 2*Math.PI); ctx.arc(enemy.x+22, enemy.y+6, 2, 0, 2*Math.PI); ctx.fill();
            } else if (enemy.row === 1 || enemy.row === 2) {
                ctx.beginPath(); ctx.roundRect(enemy.x+5, enemy.y, enemy.width-10, enemy.height, 5); ctx.fill(); ctx.stroke();
                ctx.strokeStyle=colors[enemy.row]; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(enemy.x+5, enemy.y+15); ctx.lineTo(enemy.x, enemy.y+25); ctx.moveTo(enemy.x+25, enemy.y+15); ctx.lineTo(enemy.x+30, enemy.y+25); ctx.stroke();
                ctx.fillStyle='red'; ctx.beginPath(); ctx.arc(enemy.x+12, enemy.y+8, 2, 0, 2*Math.PI); ctx.arc(enemy.x+18, enemy.y+8, 2, 0, 2*Math.PI); ctx.fill();
            } else {
                ctx.beginPath(); ctx.rect(enemy.x+3, enemy.y+5, enemy.width-6, enemy.height-5); ctx.fill(); ctx.stroke();
                ctx.strokeStyle=colors[enemy.row]; ctx.lineWidth=2;
                for (let i=0; i<6; i++) { const x=enemy.x+(i*(enemy.width/5)); ctx.beginPath(); ctx.moveTo(x, enemy.y+enemy.height); ctx.lineTo(x, enemy.y+enemy.height+8); ctx.stroke(); }
                ctx.fillStyle='red'; ctx.beginPath(); ctx.arc(enemy.x+10, enemy.y+8, 2, 0, 2*Math.PI); ctx.arc(enemy.x+20, enemy.y+8, 2, 0, 2*Math.PI); ctx.fill();
            }
        }
        function levelUp() {
            level++; enemySpeed+=0.2; enemyBulletSpeed+=0.5; enemyRows=Math.min(7, enemyRows+1); enemyCols=Math.min(12, enemyCols+1);
            bullets.length=0; enemyBullets.length=0; player.x=canvas.width/2-15; alert(`Level Up! Level ${level} - Enemies are faster and more numerous!`); levelElement.textContent=`Level: ${level}`; initEnemies();
        }
        function update() {
            if (!gameRunning) return;
            if (mobileDetected) { shootPlayer(); }
            if (keys['ArrowLeft'] && player.x > 0) { player.x -= player.speed; }
            if (keys['ArrowRight'] && player.x < canvas.width - player.width) { player.x += player.speed; }
            if (isTouching) { player.x = Math.max(0, Math.min(canvas.width - player.width, touchX - player.width/2)); }
            for (let i=bullets.length-1; i>=0; i--) { const bullet=bullets[i]; bullet.y-=bulletSpeed; if (bullet.y < 0) { bullets.splice(i, 1); } }
            for (let i=enemyBullets.length-1; i>=0; i--) { const bullet=enemyBullets[i]; bullet.y+=enemyBulletSpeed; if(bullet.y > canvas.height){ enemyBullets.splice(i,1); } else if (collision(bullet, player)) { lives--; livesElement.textContent=`Lives: ${lives}`; enemyBullets.splice(i,1); if (lives <= 0) { gameOver(); } } }
            let edgeHit = false;
            enemies.forEach(enemy => {
                if (!enemy.alive) return;
                enemy.x += enemyDirection * enemySpeed;
                if (enemy.x <= 0 || enemy.x + enemy.width >= canvas.width) { edgeHit = true; }
                const shootInterval = Math.max(300, 800 - (level * 50));
                if (Date.now() - lastEnemyShot > shootInterval && Math.random() < 0.003 + (level * 0.001) && enemy.alive) { enemyBullets.push({ x: enemy.x+enemy.width/2-2.5, y: enemy.y+enemy.height, width: 5, height: 10 }); lastEnemyShot=Date.now(); }
                for (let i=bullets.length-1; i>=0; i--) { if (collision(bullets[i], enemy)) { enemy.alive=false; bullets.splice(i,1); score+=10*level; scoreElement.textContent=`Score: ${score}`; break; } }
                if (enemy.y + enemy.height >= player.y || collision(enemy, player)) { lives--; livesElement.textContent=`Lives: ${lives}`; enemy.alive=false; if (lives <= 0) { gameOver(); } }
            });
            if (edgeHit) { enemyDirection*=-1; enemies.forEach(enemy => { if (enemy.alive) enemy.y += 20; }); }
            if (enemies.filter(e => e.alive).length === 0) { levelUp(); }
        }
        function gameOver() {
            gameRunning = false;
            alert(`Game Over! Final Score: ${score} | Reached Level ${level}`);
            restartBtn.disabled = false;
            restartBtn.textContent = 'Restart Game';
        }
        function render() {
            ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--bg-primary');
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            ctx.fillStyle = 'yellow'; bullets.forEach(bullet => ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height));
            ctx.fillStyle = 'red'; enemyBullets.forEach(bullet => ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height));
            enemies.forEach(enemy => { if (enemy.alive) drawEnemy(enemy); });
        }
        function gameLoop() {
            update(); render(); requestAnimationFrame(gameLoop);
        }
        function restartGame() {
            score=0; lives=3; level=1; gameRunning=true; bullets.length=0; enemyBullets.length=0;
            player.x = canvas.width/2-15; enemySpeed=0.5; enemyBulletSpeed=3; enemyRows=5; enemyCols=10;
            scoreElement.textContent=`Score: ${score}`; levelElement.textContent=`Level: ${level}`; livesElement.textContent=`Lives: ${lives}`;
            initEnemies(); lastShotTime=0; lastEnemyShot=0; enemyDirection=1;
            restartBtn.disabled = true; restartBtn.textContent = 'Playing...';
            tiltEnabled=false; if(mobileDetected) initTilt();
        }
        
        // Initial setup
        restartBtn.disabled = false;
        initEnemies();
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            initTilt();
        }
        gameLoop();
    </script>
</body>
</html>
